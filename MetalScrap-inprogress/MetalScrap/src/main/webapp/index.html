<html>

<head>
<script src="resources/js/jquery-1.11.0.js"></script> 
</head>
<body>
<style>

.label{
font-style: Italic;
color: #444444;
}

.timeLeftLabel{
color: #444444 ;
}

.name .dateFrom .dateTo .currentOffer .timeLeft{

color: #222222;
font-weight: bold ;s
}

</style>
<div id="page" style="display:block;width:100%;height:700px;margin: 0 auto ;">
<div id="header" style="display: block; width: 100%; height: 120px; background-image: url('resources/images/header.jpg')">
<div id="innerheader" style="padding: 10px 10px 10px 10px; color: #545454; font-family: Verdana; font-style: Italic; font-size: 1.6em;text-shadow: 1px 1px #5c5c5c; color: #cdcdcd">
Ajax RESTful services test
</div>
</div>
	<div id="content" style="display: block ; width:70%; height: 60%;box-shadow: 10px 10px 5px #888888; background-color: #eee; margin: 0 auto;">
	<div style="display: block ;width: 60%; height: 300px;float: left ;">
	<table border="0">
	<tr>
	<td><span class="label">Tytuł: </span></td><td><span class="name"></span></td>
	</tr>
	<tr>
	<td><span class="label">Data rozpoczęcia: </span></td><td><span class="dateFrom"></span></td>	
	</tr>
	<tr>
	<td><span class="label">Data zakończenia: </span></td><td><span class="dateTo"></span></td>
	</tr>
	<tr>
	<td><span class="label">Najlepsza oferta: </span></td><td><span class="currentOffer"></span></td>
	</tr>
	<tr>
	<td><span class="timeLeftLabel"></span></td><td><span class="timeLeft"></span></td>
	</tr>
	</table>
		
		
		
		
		
</div>
<div style="display: block;width:40%;height: 300px ;float: right;">

<form id="offerForm" >
<input id="val" class="val" name="val" type="text" />
<input id="id" name="id" type="hidden" value="1" /> 
<input  id="bid" class="bid" type="button" value="licytuj" onclick="javascript:submitF(this.form)"></input>
</form>

</div>
		</div>
	</div>

</div>


<script type="text/javascript">



$(document).ready(function() {
	
    
update(); 
	
    
});

function update(){

	$.ajax({
        url: "http://localhost:8081/MetalScrap/app/auction",
        data: {"id": 1},
        processData: true
    }).then(function(data) {
     $(".name").text(data.name) ;
     $(".dateFrom").text(data.dateFrom) ;
     $(".dateTo").text(data.dateTo) ;
     $(".currentOffer").text(data.currentOffer) ;
     $(".timeLeft").text(data.timeLeft) ;
     
          $(".bid").prop("disabled", !data.started) ;
          $(".val").prop("disabled", !data.started) ;
      
          if(data.stat==1) {
              $(".timeLeftLabel").text("Do rozpoczęcia: ") ;
          } else {
         	 $(".timeLeftLabel").text("Do zakończenia: ") ;

                  }
     
	setTimeout(update, 1000) ;	
     
       
    });


    function addOffer(offer) {

    	

        }

	}


function submitF(form) {
Id = form.id.value;
Value = form.val.value ;
	
	$.post( "http://localhost:8081/MetalScrap/app/offer",{ id: Id, value: Value }, function( data ){
		
		});
	
	
	
}

</script>


</body>